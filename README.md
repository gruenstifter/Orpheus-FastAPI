## OpenAI-Compatible API Endpoints

This project now includes an OpenAI-compatible Text-to-Speech API endpoint that exposes the existing Orpheus TTS engine with OpenAI-style parameters and response formats.

### POST /v1/audio/speech

- **Description:** Generate speech audio from text input.
- **Request Body (JSON):**
  - `model` (string): Model name (e.g., "tts-1").
  - `input` (string): Text to synthesize.
  - `voice` (string, optional): Voice name mapped internally (default: "tara").
  - `response_format` (string, optional): Audio format, either "mp3" or "wav" (default: "mp3").
  - `speed` (float, optional): Speech speed multiplier (default: 1.0).
  - `stream` (bool, optional): Whether to stream audio chunks (only supported for "wav" format).

- **Response:**
  - If `stream` is `true` and `response_format` is "wav", returns a streaming response with audio chunks as they are generated.
  - Otherwise, returns the full audio file in the requested format.

- **Example Request:**

```json
{
  "model": "tts-1",
  "input": "Hello, this is a test.",
  "voice": "alloy",
  "response_format": "wav",
  "speed": 1.0,
  "stream": true
}
```

- **Notes:**
  - Streaming is currently supported only for WAV format.
  - MP3 responses are generated by transcoding WAV output.

### Voice Mapping

The following voice names are mapped from OpenAI-style names to internal Orpheus voices:

| OpenAI Voice | Orpheus Voice |
|--------------|---------------|
| alloy        | tara          |
| echo         | leo           |
| shimmer      | zoe           |
| nova         | mia           |
| onyx         | dan           |
| fable        | jess          |

---

Please ensure you have `pydub` installed and `ffmpeg` available on your system for MP3 transcoding.

---

This documentation should help you test the OpenAI-compatible endpoints and streaming functionality.

## Rhythmie API Documentation

The existing Rhythmie API endpoints remain fully supported alongside the new OpenAI-compatible interface.

### Legacy Speech Generation Endpoint

- **POST /speak**

- **Description:** Generate speech audio from text input using the Orpheus TTS engine.

- **Request Body (JSON):**
  - `text` (string): Text to synthesize.
  - `voice` (string, optional): Voice name (default: "tara").

- **Response:** JSON object with status, voice, output file path, and generation time.

### Voices Listing Endpoint

- **GET /v1/audio/voices**

- **Description:** Retrieve the list of available voices supported by the engine.

- **Response:** JSON object with status and list of voices.

---

You can continue to use these legacy endpoints for compatibility and testing while exploring the new OpenAI-compatible API.
